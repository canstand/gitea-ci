# gitea-ci

ä¸ªäººæˆ–å°å›¢é˜Ÿæ­å»ºç§æœ‰ git åŠ  ci æœåŠ¡çš„å‚è€ƒéƒ¨ç½²ç¤ºä¾‹ï¼Œé‡ç‚¹å…³æ³¨ç§æœ‰éƒ¨ç½²çš„å®‰å…¨é…ç½®ã€‚å€ŸåŠ© [gitea](https://gitea.io) å’Œ [droneci](https://drone.io) åŠå¯é€‰ä½¿ç”¨ [caddy](https://caddyserver.com/)ï¼Œæ»¡è¶³éƒ¨ç½²åœ¨äº‘æœåŠ¡å™¨æˆ–çº¯å†…ç½‘çš„ä¸åŒè¦æ±‚ã€‚

## æœåŠ¡ä¸é…ç½®è¯´æ˜
ä½¿ç”¨ caddy ä½œä¸ºè®¿é—®å…¥å£ï¼Œgitea ä½œä¸ºä»£ç ä»“åº“ï¼ˆæ•°æ®åº“ç”¨ postgresqlï¼‰ï¼Œdroneci è¿›è¡Œè‡ªåŠ¨åŒ–æ„å»ºã€‚

å…³é”®çš„é…ç½®ç‰¹ç‚¹æ˜¯ droneci ä½¿ç”¨ oauth è¿æ¥ giteaã€‚å³ä½¿å†…ç½‘éƒ¨ç½²ï¼Œgitea/dronci server/droneci runner ä¹‹é—´ä¹Ÿé€šè¿‡ https è¿æ¥ï¼Œè¯ä¹¦ä¸ºç»Ÿä¸€çš„å†…éƒ¨ CA é¢å‘ï¼Œé˜²æ­¢ token è¢«çªƒå¬è½»æ˜“å¯¼è‡´æºä»£ç æ³„éœ²ã€‚


### å…¬å…±é…ç½®
.env.example ç¤ºä¾‹é…ç½®è¯´æ˜ï¼š
* DATA_PATHï¼Œæ‰€æœ‰æœåŠ¡çš„æ•°æ®å­˜å‚¨ä¼šåˆ†åˆ«æŒ‚è½½åˆ°è¯¥ç›®å½•çš„ç‰¹å®šå­ç›®å½•ä¸‹
* MAIN_DOMAIN æŒ‡å®šä¸»åŸŸåï¼Œç¤ºä¾‹ä¸­ä¸º `example.com`ï¼Œé‚£ä¹ˆ git æœåŠ¡å’Œ ci æœåŠ¡çš„è®¿é—®åŸŸåå°±æ˜¯ `https://git.example.com` å’Œ `https://ci.example.com`
* TZ æŒ‡å®šæ‰€æœ‰æœåŠ¡å®¹å™¨ç³»ç»Ÿçš„é»˜è®¤æ—¶åŒº
* CACERT_PATH æŒ‡å®š HOST ç³»ç»Ÿä¸­æ ¹è¯ä¹¦æ–‡ä»¶ä½ç½®ï¼Œè¯¥æ–‡ä»¶ä¼šæŒ‚è½½åˆ°å®¹å™¨ç³»ç»Ÿä¸­ã€‚
    - ä¸ºäº†è®© droneci åŠ runner èƒ½é€šè¿‡ https è®¿é—® gitï¼Œå®¹å™¨ç³»ç»Ÿéœ€è¦æ­£ç¡®çš„æ ¹è¯ä¹¦ã€‚
    - å†…ç½‘éƒ¨ç½²æ—¶éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼Œcaddy ç”Ÿæˆçš„è‡ªç­¾åæ ¹è¯ä¹¦éœ€è¦å…ˆå®‰è£…åˆ° HOST ç³»ç»Ÿä¸­æ‰èƒ½åœ¨å…¶å®ƒæœåŠ¡ä¸­ç”Ÿæ•ˆã€‚
* INTERNAL_DNS å’Œ EXTERNAL_DNS å¯ä»¥æŒ‡å®šä¸¤ä¸ª DNS æœåŠ¡å™¨ã€‚
    - ä¸»è¦ç›®çš„æ˜¯å†…ç½‘éƒ¨ç½²æ—¶å¯ä»¥æŠŠç¬¬ä¸€ä¸ªæŒ‡å®šä¸ºå†…ç½‘ DNSã€‚ä¾‹å¦‚æœ¬äººæµ‹è¯•æ—¶åœ¨è·¯ç”±å™¨ä¸Šç”¨ hosts è§£æ exmaple.com åŸŸåï¼Œè®©å®ƒå¯ä»¥åœ¨å†…ç½‘ä½¿ç”¨ã€‚ä¸ç”¨ä¹°åŸŸåäº†ğŸ¤£
    - å…¬ç½‘éƒ¨ç½²è¯·éšæ„æŒ‡å®šå…¬å…± DNS æœåŠ¡å™¨

### caddy
caddy æ˜¯å¯é€‰çš„ã€‚åŠ å…¥ caddy ä½œä¸ºåå‘ä»£ç†çš„æœ‰ä¸¤ä¸ªåŸå› ï¼š
* ä¸€æ˜¯èƒ½è‡ªåŠ¨ç”³è¯·é…ç½® https è¯ä¹¦ï¼›
* äºŒæ˜¯å†…ç½‘éƒ¨ç½²æ—¶å¯ä»¥å……å½“ CA æœåŠ¡å™¨ï¼Œä¸”èƒ½ä¸ºå…¶å®ƒæœåŠ¡æä¾›è¯ä¹¦æœåŠ¡ï¼ˆæ”¯æŒ acme åè®®ï¼‰ã€‚

ç¤ºä¾‹ä¸­çš„é»˜è®¤é…ç½®è¯´æ˜ï¼š
* é»˜è®¤ä½¿ç”¨çš„æ˜¯ Caddy æœ¬åœ°è¯ä¹¦ï¼Œå¯ä»¥å†…ç½‘éƒ¨ç½²ï¼Œä¸éœ€è¦å¼€æ”¾å…¬ç½‘è®¿é—®ã€‚å¦‚æœå…è®¸å…¬ç½‘è®¿é—®ï¼Œå¯ä»¥åˆ é™¤é…ç½®æ–‡ä»¶ caddy/Caddyfile ä¸­çš„ `tls internal` ï¼Œ caddy ä¼šä½¿ç”¨ Let's Encrypt ACME ç”³è¯·å…è´¹ HTTPS è¯ä¹¦ã€‚
* Caddyfile ä¸­ä»¥ä¸‹é…ç½®æä¾›æœ¬åœ°è¯ä¹¦æœåŠ¡å™¨çš„ acme åè®®æ”¯æŒã€‚å¦‚æœä¸éœ€è¦å¯ä»¥åˆ é™¤ï¼š
  ```
  ca.{$MAIN_DOMAIN} {
    tls internal
    acme_server
  }
  ```
* Caddy æœ¬åœ°è¯ä¹¦çš„æ ¹è¯ä¹¦è·¯å¾„åŠåœ¨å„ç³»ç»Ÿçš„å®‰è£…æ–¹æ³•è§åé¢çš„ [FAQ](#faq)
* å…¶å®ƒå†…éƒ¨æµ‹è¯•æœåŠ¡éœ€è¦ä½¿ç”¨ httpsï¼Œå¯ä»¥æŒ‡å®š acme åè®®ç«¯ç‚¹ä¸º https://ca.example.com/acme/local/directory [^1]

### gitea

é¦–æ¬¡å¯åŠ¨æœåŠ¡ä¹‹åï¼Œéœ€è¦è®¿é—® https://git.example.com/install è¿›è¡Œåˆå§‹å®‰è£…é…ç½®ã€‚æ³¨æ„äº‹é¡¹æˆ–å®‰å…¨é…ç½®å»ºè®®ï¼š
* docker-compose.yml ä¸­æœ‰æ„æ²¡æœ‰é…ç½® GITEA__database__PASSWD ç¯å¢ƒå˜é‡ï¼Œç•™ç»™ç”¨æˆ·åœ¨å®‰è£…ç•Œé¢è¾“å…¥ã€‚å®‰è£…é…ç½®å®Œæˆä¹‹åè¦ä¿®æ”¹ï¼Œè¦ä¹ˆå¢åŠ åŒæ ·æ ¼å¼çš„ç¯å¢ƒå˜é‡ï¼Œè¦ä¹ˆç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ `./data/gitea/config/app.ini`ã€‚[^2]
* æ³¨æ„æ•°æ®åº“ç›¸å…³é…ç½®
* æ³¨æ„ url å’Œ ssh ç«¯å£é…ç½®
* ç§æœ‰éƒ¨ç½²å»ºè®®é…ç½®ï¼š
  * å¯ç”¨æœ¬åœ°æ¨¡å¼
  * ç¦æ­¢ç”¨æˆ·è‡ªåŠ©æ³¨å†Œ
  * å–æ¶ˆâ€œå¯ç”¨ OpenID ç™»å½•â€å’Œâ€œå¯ç”¨ OpenID è‡ªåŠ©æ³¨å†Œâ€
  * å¯ç”¨é¡µé¢è®¿é—®é™åˆ¶ï¼ˆæ¸¸å®¢åªèƒ½çœ‹åˆ°ç™»å½•å’Œæ³¨å†Œé¡µé¢ï¼‰
  * ï¼ˆç¦æ­¢æ³¨å†Œæ—¶ï¼‰æä¾›åˆå§‹ç®¡ç†å‘˜è´¦æˆ·ä¿¡æ¯
  * å¦‚æœ‰éœ€è¦ï¼Œå‹¾é€‰â€œé»˜è®¤æƒ…å†µä¸‹éšè—ç”µå­é‚®ä»¶åœ°å€â€
* ç¦æ­¢è‡ªåŠ©æ³¨å†Œæ—¶ï¼Œå¿…é¡»åœ¨å®‰å…¨é…ç½®æœŸé—´åˆ›å»ºç®¡ç†å‘˜å¸æˆ·
* å…è®¸æ³¨å†Œæ—¶ï¼Œå»ºè®®æä¾›ç”µå­é‚®ä»¶ç›¸å…³é…ç½®ï¼Œå¹¶å‹¾é€‰éœ€è¦å‘ç”µå­é‚®ä»¶ç¡®è®¤æ³¨å†Œã€‚
* ç®¡ç†åå°å¯ä»¥æ·»åŠ  Web é’©å­ï¼Œæ”¯æŒé’‰é’‰ã€é£ä¹¦ã€Matrixã€Telegram ç­‰ã€‚


### droneci
è™½ç„¶ droneci çš„å¼€æºç‰ˆæœ¬ï¼ˆossï¼‰åŠŸèƒ½å—é™[^3]ï¼Œä¸€èˆ¬ä½¿ç”¨åœºæ™¯è¿˜æ˜¯èƒ½å¯¹ä»˜çš„ã€‚ä¸è¿‡å› ä¸ºç‰ˆæœ¬ 2 å¼€å§‹ä¼šæç¤ºæ³¨å†Œï¼Œæ‰€ä»¥ç¤ºä¾‹ä¸­é»˜è®¤ä½¿ç”¨ v1.x ã€‚å¯æ ¹æ®éœ€è¦é€‰æ‹©ä½¿ç”¨å®˜æ–¹çš„ 2.x ç‰ˆæœ¬ï¼Œæˆ–è€…åˆ‡æ¢åˆ°æ›´çº¯ç²¹çš„ç¤¾åŒºåˆ†æ”¯ç‰ˆæœ¬ [woodpecker](https://github.com/woodpecker-ci)ã€‚

é»˜è®¤é…ç½®ï¼š
* droneci ä½¿ç”¨ gitea çš„ oauth è®¤è¯ç™»å½•ã€‚
  - éœ€è¦å…ˆé…ç½®å¥½ gitea å¹¶ç”Ÿæˆ oauth token å†™åˆ° .env_drone é‡Œï¼Œdroneci æ‰èƒ½æ­£å¸¸è¿è¡Œã€‚
  - é…ç½®è¿˜éœ€è¦æŒ‡å®šç”¨æ¥ä½œä¸º droneci ç®¡ç†å‘˜çš„ gitea ä¸­çš„æŸä¸ªç”¨æˆ·åï¼ˆè¯¥ç”¨æˆ·éœ€è¦å…·å¤‡æ‰€æœ‰ä½¿ç”¨ ci æœåŠ¡çš„ä»“åº“çš„æƒé™ï¼‰
* droneci ç¤¾åŒºç‰ˆåªèƒ½ä½¿ç”¨é»˜è®¤çš„ sqlite æ•°æ®åº“
* runner åœ¨å‚è€ƒé…ç½®é‡Œæ˜¯éƒ¨ç½²åœ¨åŒä¸€ docker ç¯å¢ƒä¸­ï¼Œè¿™æ ·å¹¶ä¸å®‰å…¨ï¼Œå»ºè®®å•ç‹¬ä¸»æœºè¿è¡Œã€‚
* æ³¨æ„ï¼šä½¿ç”¨è‡ªç­¾åè¯ä¹¦æ—¶ï¼Œrunner çš„ docker è¿è¡Œç¯å¢ƒä¹Ÿéœ€è¦å®‰è£…æ ¹è¯ä¹¦ã€‚
  - docker-compose.yml ä¸­çš„ `DRONE_RUNNER_VOLUMES=${CACERT_PATH:?err}:/etc/ssl/certs/ca-certificates.crt` é…ç½®ä¼šå°† docker host çš„è¯ä¹¦æŒ‚è½½åˆ°æ¯ä¸ªæ­¥éª¤è¿è¡Œçš„æ’ä»¶ç¯å¢ƒä¸­ã€‚å¦‚æœæ’ä»¶è¿è¡Œç¯å¢ƒä¸æ˜¯ alpine/debian/ubuntu ç­‰ï¼Œéœ€è¦ä¿®æ”¹ç›®æ ‡è·¯å¾„ã€‚
  - è¿™å¯ä»¥é¿å…åœ¨æ’ä»¶çš„è¿è¡Œç¯å¢ƒä¸­æ‰‹åŠ¨å®‰è£…è‡ªç­¾åæ ¹è¯ä¹¦ã€‚

## éƒ¨ç½²å®è·µ

åœ¨ä»»æ„æ”¯æŒ docker çš„ä¸»æœºç¯å¢ƒéƒ½å¯ä»¥éƒ¨ç½²ã€‚æ¨è NAS æ–¹æ¡ˆï¼Œå¤šå° NAS è¿˜èƒ½é…ç½®å¼‚åœ°å®¹ç¾å¤‡ä»½å“¦ã€‚

### Linux æˆ– macOS ä¸»æœº
è¦æ±‚å…ˆå®‰è£…å¥½ docker engine å’Œ docker-composeã€‚Windows ä¹Ÿå¯ä»¥ä½¿ç”¨æ”¯æŒ WSL2 çš„ Docker Desktopã€‚

1. **åŸºç¡€é…ç½®**
  - å¤åˆ¶ .env.example ä¸º .envï¼Œä¿®æ”¹å…¶ä¸­çš„
    - è‡ªå®šä¹‰ DNS æœåŠ¡å™¨ï¼ˆæ–¹ä¾¿è§£æå†…ç½‘åŸŸåæˆ–æµ‹è¯•åŸŸåï¼‰
    - ä¸»åŸŸåï¼ˆæœåŠ¡çš„ç»Ÿä¸€ä¸»åŸŸåï¼‰
    - æ ¹è¯ä¹¦è·¯å¾„ï¼ˆè¿™ä¸ªæ ¹æ® docker è¿è¡Œç¯å¢ƒçš„ host ä¸»æœºæ¥é€‰æ‹©ï¼Œå…±äº« host çš„æ ¹è¯ä¹¦åˆ°å®¹å™¨ä¸­ï¼‰
  - ä¿®æ”¹ .POSTGRES_PASSWORD æ–‡ä»¶ï¼ŒæŒ‡å®š postgresql çš„å¯†ç 
2. å¯åŠ¨ caddy
  - `docker-compose up -d caddy`ï¼Œå…ˆå¯åŠ¨ caddy
  - å¦‚æœæ˜¯å†…ç½‘éƒ¨ç½²å¹¶å¯ç”¨äº†æœ¬åœ°è¯ä¹¦æœåŠ¡ï¼Œå‚è€ƒ[å¦‚ä½•å®‰è£…å’Œä¿¡ä»»è‡ªç­¾åè¯ä¹¦](https://kompost.cn/posts/install-and-trust-self-signed-cert/)æŠŠ Caddy ç”Ÿæˆçš„æ ¹è¯ä¹¦å®‰è£…åˆ° docker host ç³»ç»Ÿä¸­
  - å®Œå…¨å…³é—­æµè§ˆå™¨å†é‡æ–°æ‰“å¼€ï¼Œè®¿é—® https://ca.example.com ä¸ä¼šå¼¹å‡ºè¯ä¹¦è­¦å‘Šï¼Œåˆ™è¯æ˜æ ¹è¯ä¹¦å·²å®‰è£…å¥½ã€‚
3. å¯åŠ¨å¹¶é…ç½® gitea
  - `docker-compose up -d gitea`ï¼Œå¯åŠ¨ gitea
  - å¦‚æœæœåŠ¡å¯åŠ¨å¤±è´¥å¹¶æç¤º `mkdir: can't create directory '/var/lib/gitea/git': Permission denied`ï¼Œéœ€è¦ä¿®æ”¹ ./data/gitea/ ä¸‹ä¸¤ä¸ªç›®å½•çš„æ‰€æœ‰è€…æƒé™ï¼š`sudo chown 1000:1000 ./data/gitea/config ./data/gitea/data`
  - è®¿é—® https://git.example.com/installï¼Œå‚è€ƒå‰é¢çš„è¯´æ˜å®Œæˆ gitea çš„é…ç½®ã€‚
4. å‡†å¤‡ droneci é…ç½®
  - åœ¨ gitea ä¸­ï¼Œä»å³ä¸Šè§’ç”¨æˆ·èœå•è¿›å…¥**è®¾ç½®->åº”ç”¨**ï¼Œåº”ç”¨åç§°ï¼šdroneï¼Œé‡å®šå‘ URIï¼šhttps://ci.example.com/loginï¼Œ**åˆ›å»ºåº”ç”¨**ã€‚
  - æŠŠæ˜¾ç¤ºçš„å®¢æˆ·ç«¯ ID å’Œå®¢æˆ·ç«¯å¯†é’¥å¤åˆ¶åˆ° .env_drone ä¸­ã€‚
  - ä½¿ç”¨`openssl rand -hex 16`ç”Ÿæˆä¸€æ®µéšæœºå¯†ç ï¼Œä½œä¸º .env_drone ä¸­çš„ DRONE_RPC_SECRET å€¼
5. å¯åŠ¨ drone æœåŠ¡
  - ç°åœ¨å¯ä»¥å¯åŠ¨ droneci äº†ï¼Œç”¨ `docker-compose up -d drone` å¯åŠ¨æœåŠ¡ã€‚
  - è®¿é—® https://ci.example.com å¹¶æŒ‰æç¤ºæˆæƒç™»å½•


### NAS ç¯å¢ƒ

NAS ä¸Šè¿è¡Œ git æœåŠ¡å¯¹ä¸ªäººæˆ–å°å›¢é˜Ÿæ¥è¯´æ˜¯éå¸¸æœ‰æ€§ä»·æ¯”çš„é€‰æ‹©ã€‚é…åˆä¸é—´æ–­ç”µæºï¼ˆUPSï¼‰å’ŒåŒ NAS å¼‚åœ°åŒæ­¥å¤‡ä»½ï¼Œå¯ä»¥æä¾›è¾ƒé«˜çº§åˆ«çš„æ•°æ®å®‰å…¨æ€§ã€‚

æœ¬ç¤ºä¾‹ä¸­é€‚åˆå°†ä¸»è¦æœåŠ¡éƒ¨ç½²åœ¨ NAS ä¸Šï¼Œcirunner å¦æ‰¾å°æ€§èƒ½æ›´é«˜çš„ä¸»æœºè¿è¡Œã€‚

ä»¥ç¾¤æ™–çš„ç³»ç»Ÿä¸ºä¾‹ï¼Œåº”ç”¨å¥—ä»¶ä¸­å¯ä»¥ä¸‹è½½ docker å¥—ä»¶ã€‚ç„¶åå¯ä»¥ç”¨ä¸¤ç§æ–¹å¼è¿è¡Œï¼š

1. SSH åˆ° NASï¼Œä»¥æœ¬ç¤ºä¾‹ä¸­çš„é…ç½®ä¸ºåŸºç¡€ç›´æ¥ç”¨ docker-compose æ–¹å¼è¿è¡Œã€‚æ³¨æ„ç«¯å£æ˜ å°„æœ‰æ²¡æœ‰ä¸ç¾¤æ™–ä¸­çš„å…¶å®ƒé…ç½®äº§ç”Ÿå†²çªã€‚

2. åœ¨ Web ç®¡ç†ç•Œé¢çš„ Docker å¥—ä»¶ä¸­ä¸€ä¸ªä¸€ä¸ªé…ç½®ã€‚éœ€è¦æ‰‹åŠ¨é…ç½®ç›¸å…³çš„å¯åŠ¨å‚æ•°ã€ç¯å¢ƒå˜é‡ã€å·æ˜ å°„ç»‘å®šç­‰ã€‚

å¦å¤–ï¼Œå¦‚æœä¸éœ€è¦è‡ªç­¾åè¯ä¹¦æœåŠ¡ï¼Œè¿˜å¯ä»¥ç›´æ¥åˆ©ç”¨ç¾¤æ™– NAS ä¸Šçš„åä»£æœåŠ¡ï¼ˆä¹Ÿéœ€è¦ Web ç•Œé¢æ‰‹åŠ¨é…ç½®ï¼‰ï¼Œä¸éœ€è¦ Caddyã€‚


* å¦‚ä½•åœ¨ç¾¤æ™– Synology ä¸Šä½¿ç”¨è‡ªå®šä¹‰ docker é•œåƒï¼Ÿ
  - æ–¹æ³•ä¸€ï¼Œæœ¬åœ° build ä¹‹åï¼Œä¸Šä¼  drone-oss.tar.gz åˆ° NASï¼Œç„¶åå¯¼å…¥ï¼ˆDocker å¥—ä»¶ -> æ˜ åƒ -> æ–°å¢ -> ä»æ–‡ä»¶æ·»åŠ ï¼‰
    ```bash
    docker build -t drone:oss -f ./drone/server.Dockerfile
    docker save drone:oss | gzip > drone-oss.tar.gz
    ```
  - æ–¹æ³•äºŒï¼Œä½¿ç”¨ SSH è¿æ¥åˆ°ç¾¤æ™–ç³»ç»Ÿï¼Œç”¨ docker å‘½ä»¤æœ¬åœ° build

## å‡çº§ä¸å®‰å…¨
* Gitea ä½¿ç”¨ Dockerfile é›†æˆè¯ä¹¦ï¼Œéœ€è¦ç”¨ `docker-compose build gitea --no-cache` é‡æ–° build é•œåƒï¼Œå†é‡å¯æœåŠ¡
  - æ³¨æ„å…³æ³¨ Gitea çš„ç‰ˆæœ¬æ›´æ–°æ—¥å¿—ï¼Œå‡ºç°å®‰å…¨æ€§æ”¹è¿›æ—¶åŠæ—¶å‡çº§
* Caddy åªç”¨ `docker-compose pull caddy` å†é‡å¯å°±å¯ä»¥äº†
* Droneci 1.x ç‰ˆæœ¬ä¸ä¼šæœ‰å‡çº§äº†ï¼Œæ¢ç”¨ 2.x æˆ– [woodpecker](https://github.com/woodpecker-ci)


## FAQ
* ä½¿ç”¨ Caddy æœ¬åœ°è‡ªç­¾åè¯ä¹¦ï¼Œå¦‚ä½•ä¸‹è½½æ ¹è¯ä¹¦ï¼Ÿ
  * Caddy æœ¬åœ°è¯ä¹¦çš„æ ¹è¯ä¹¦é¦–æ¬¡è¿è¡Œè‡ªåŠ¨ç”Ÿæˆï¼Œè·¯å¾„ä¸º data/caddy/caddy/pki/authorities/local/root.crt

* å¦‚ä½•åœ¨æµè§ˆæ—¶ä¿¡ä»»è‡ªç­¾åè¯ä¹¦ï¼Ÿ
  * Windows ä¸‹åŒå‡» root.crtï¼Œé€‰æ‹©å®‰è£…åˆ°â€œå—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„â€ä¸­ï¼Œæ”¯æŒ Edge æˆ– Chrome ç­‰ã€‚
  * Firefox æµè§ˆå™¨éœ€è¦åœ¨â€œé€‰é¡¹â€é‡Œæœç´¢â€œè¯ä¹¦â€ï¼ŒæŸ¥çœ‹è¯ä¹¦å¹¶é€‰æ‹©â€œå¯¼å…¥â€åˆ°è¯ä¹¦é¢å‘æœºæ„ã€‚
  * Linux ä¸‹æŸäº›å‘½ä»¤è¡Œå·¥å…·å¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šå¿½ç•¥è‡ªç­¾åè¯ä¹¦è­¦å‘Šï¼Œæˆ–è€…æŒ‡å®šæ ¹è¯ä¹¦æ–‡ä»¶ã€‚
  * Linux ä¸‹è¦å®‰è£…åˆ°ç³»ç»Ÿè¯ä¹¦å­˜å‚¨ï¼Œä¸åŒå‘è¡Œç‰ˆæœ‰æ‰€åŒºåˆ«ã€‚
    ä»¥ alpine ä¸ºä¾‹ï¼š`apk add ca-certificates && cp root.crt /usr/local/share/ca-certificates/ && update-ca-certificates`
 
 [^1]: https://caddyserver.com/docs/caddyfile/directives/acme_server#acme-server
[^2]: https://docs.gitea.io/en-us/install-with-docker-rootless/#managing-deployments-with-environment-variables 
[^3]: https://www.drone.io/enterprise/opensource/#features
